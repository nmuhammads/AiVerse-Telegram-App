@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.5;
  font-weight: 400;
  --tma-offset: 56px;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html,
body,
#root {
  height: 100%;
  background-color: #000;
}

body {
  margin: 0;
}

/* Global Scrollbar Hide */
* {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari and Opera */
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@keyframes spin-slow {
  from {
    transform: rotate(0deg)
  }

  to {
    transform: rotate(360deg)
  }
}

.animate-spin-slow {
  animation: spin-slow 8s linear infinite
}

/* Prompt Input Animation - Rotating Snake Border */
.prompt-container {
  position: relative;
  border-radius: 18px;
  background: #1a1a1d;
  padding: 2px;
  overflow: hidden;
  z-index: 0;
}

.prompt-container::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 500%;
  height: 500%;
  background: conic-gradient(transparent 0%,
      transparent 70%,
      #ff0000 75%,
      #ffff00 80%,
      #00ff00 85%,
      #00ffff 90%,
      #0000ff 95%,
      #ff00ff 100%);
  animation: rotate-border 4s linear infinite;
  z-index: -1;
}

.prompt-container::after {
  content: '';
  position: absolute;
  inset: 2px;
  background: #1a1a1d;
  border-radius: 16px;
  z-index: -1;
}

@keyframes rotate-border {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }

  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

.prompt-input {
  width: 100%;
  background: transparent;
  /* Transparent to show container::after bg */
  border: none;
  border-radius: 16px;
  padding: 16px;
  font-size: 16px;
  color: white;
  outline: none;
  resize: none;
  min-height: 120px;
  display: block;
  position: relative;
  z-index: 1;
}

/* Remove old input-wrapper styles */
.input-wrapper {
  all: unset;
  display: block;
  width: 100%;
}

.input-wrapper::before,
.input-wrapper::after {
  display: none;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideInFromTop {
  from {
    transform: translateY(-1rem);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInFromBottom {
  from {
    transform: translateY(1rem);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-in {
  animation-duration: 0.3s;
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fadeIn;
}

.slide-in-from-top-4 {
  animation-name: slideInFromTop;
}

.slide-in-from-bottom-2 {
  animation-name: slideInFromBottom;
}

/* Glassmorphism Utilities */
.glass-panel {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Safe Area Utilities */
.safe-bottom-fixed {
  bottom: 2rem;
  padding-bottom: calc(env(safe-area-inset-bottom) + 10px);
}

.safe-bottom-tabbar {
  padding-bottom: calc(8.5rem + env(safe-area-inset-bottom));
}

/* Skeleton Shimmer Animation */
@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* TabBar height variables - используется для позиционирования элементов над TabBar */
:root {
  /* TabBar высота: ~60px контент + padding */
  --tabbar-height: 64px;
  /* iOS: bottom-2 (8px) + safe-area + extra space for generate button */
  --tabbar-offset-ios: calc(18px + var(--tabbar-height) + env(safe-area-inset-bottom));
  /* Android: 2rem (32px) + safe-area + extra padding */
  --tabbar-offset-android: calc(37px + var(--tabbar-height) + env(safe-area-inset-bottom) + 10px);
  
  /* Header offset for top positioning - includes Telegram header */
  --header-offset-ios: calc(env(safe-area-inset-top) + 55px);
  --header-offset-android: calc(env(safe-area-inset-top) + 50px);
}

/* Utility classes for positioning above TabBar */
.above-tabbar-ios {
  bottom: var(--tabbar-offset-ios);
}

.above-tabbar-android {
  bottom: var(--tabbar-offset-android);
}

/* Padding bottom for content above TabBar */
.pb-tabbar-ios {
  padding-bottom: var(--tabbar-offset-ios);
}

.pb-tabbar-android {
  padding-bottom: var(--tabbar-offset-android);
}

/* Chat container - fills space between header and tabbar dynamically */
/* StudioHeader height: ~40px buttons + py-4 (32px) = ~72px, using 80px for safety */
.chat-container-ios {
  position: fixed;
  top: calc(var(--header-offset-ios) + 80px);
  bottom: var(--tabbar-offset-ios);
  left: 0;
  right: 0;
}

.chat-container-android {
  position: fixed;
  top: calc(var(--header-offset-android) + 80px);
  bottom: var(--tabbar-offset-android);
  left: 0;
  right: 0;
}