@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.5;
  font-weight: 400;
  --tma-offset: 56px;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html, body, #root {
  height: 100%;
  background-color: #000;
}

body { margin: 0; }

.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

@keyframes spin-slow { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
.animate-spin-slow { animation: spin-slow 8s linear infinite }

/* Определяем переменную для угла, чтобы её можно было анимировать */
@property --angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}

.prompt-container {
    position: relative;
    width: 100%;
    /* Отступ, чтобы свечение не обрезалось краями экрана на мобильных */
    margin: 20px 0; 
}

.input-wrapper {
    position: relative;
    border-radius: 16px;
    background: #1a1a1a;
    /* z-index нужен, чтобы псевдоэлементы были позади */
    z-index: 0; 
}

/* Слой 1: Четкая граница (Змея) */
.input-wrapper::before {
    content: '';
    position: absolute;
    inset: -3px; /* Толщина рамки */
    border-radius: 18px; /* Чуть больше, чем у родителя (16px + 2px) */
    z-index: -1;
    
    /* Применяем градиент "змейки" - УДЛИНЕННАЯ ВЕРСИЯ */
    background: conic-gradient(
        from var(--angle),
        transparent 0%,
        transparent 30%,     /* Хвост исчезает только на 30% круга */
        rgba(255,0,0,0) 35%, /* Плавное начало */
        #ff0000 50%,         /* Красный цвет вступает в силу */
        #ffff00 60%,
        #00ff00 70%,
        #00ffff 80%,
        #0000ff 90%,
        #ff00ff 95%,
        #ff0000 100%         /* Голова */
    );
    
    animation: rotate 3s linear infinite;
}

/* Слой 2: Размытое свечение */
.input-wrapper::after {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 18px;
    z-index: -2;
    
    /* Тот же удлиненный градиент для свечения */
    background: conic-gradient(
        from var(--angle),
        transparent 0%,
        transparent 30%,
        rgba(255,0,0,0) 35%,
        #ff0000 50%,
        #ffff00 60%,
        #00ff00 70%,
        #00ffff 80%,
        #0000ff 90%,
        #ff00ff 95%,
        #ff0000 100%
    );
    
    filter: blur(20px);
    opacity: 0.8;
    animation: rotate 3s linear infinite;
}

@keyframes rotate {
    0% { --angle: 0deg; }
    100% { --angle: 360deg; }
}

/* Поле ввода */
.prompt-input {
    width: 100%;
    background: #1a1a1d; /* Цвет фона внутри рамки */
    border: none;
    border-radius: 16px; /* Совпадает с wrapper */
    padding: 20px 24px;
    font-size: 16px;
    color: #ffffff;
    outline: none;
    resize: vertical;
    min-height: 100px;
    font-family: inherit;
    line-height: 1.6;
    display: block; /* Убираем отступы строчных элементов */
}

.prompt-input::placeholder {
    color: #5c5c63;
}

.min-h-dvh { min-height: 100dvh; min-height: 100svh; }
.safe-top { padding-top: var(--safe-area-top, env(safe-area-inset-top)); }
.safe-bottom-padding { padding-bottom: var(--safe-area-bottom, env(safe-area-inset-bottom)); }
.safe-bottom-fixed { bottom: calc(var(--safe-area-bottom, env(safe-area-inset-bottom)) + 1rem); }
.sticky-safe-top { top: calc(var(--safe-area-top, env(safe-area-inset-top)) + var(--tma-offset, 56px)); }
.safe-bottom-tabbar { padding-bottom: calc(var(--safe-area-bottom, env(safe-area-inset-bottom)) + 6rem); }
