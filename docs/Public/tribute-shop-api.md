# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –ú–∞–≥–∞–∑–∏–Ω–∞ Tribute

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**Base URL**: `https://tribute.tg/api/v1`

API-–∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Api-Key` –≤ –∫–∞–∂–¥–æ–º HTTPS-–∑–∞–ø—Ä–æ—Å–µ:

```bash
curl -X GET \
  'https://tribute.tg/api/v1/shop' \
  -H 'Api-Key: your_api_key_here'
```

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Tribute –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãØ) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É ‚Üí "Settings"
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "API Keys"
4. –ù–∞–∂–º–∏—Ç–µ "Generate API Key" –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### 1. **GET /shop** - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞–≥–∞–∑–∏–Ω–µ

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞–≥–∞–∑–∏–Ω–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "userId": 123456,
  "name": "My Shop",
  "link": "my-shop-link",
  "callbackUrl": "https://your-server.com/webhook",
  "recurrent": true,
  "onlyStars": false,
  "status": 1
}
```

**–ü–æ–ª—è:**
- `userId` - ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
- `link` - –°—Å—ã–ª–∫–∞/slug –º–∞–≥–∞–∑–∏–Ω–∞
- `callbackUrl` - URL –≤–µ–±—Ö—É–∫–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö
- `recurrent` - –î–æ—Å—Ç—É–ø–Ω—ã –ª–∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- `onlyStars` - –ü—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ª–∏ —Ç–æ–ª—å–∫–æ Telegram Stars
- `status` - –°—Ç–∞—Ç—É—Å –º–∞–≥–∞–∑–∏–Ω–∞ (0 = –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω, 1 = –∞–∫—Ç–∏–≤–µ–Ω)

---

### 2. **POST /shop/orders** - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL –¥–ª—è –æ–ø–ª–∞—Ç—ã. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–æ–≤—ã–µ –∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "amount": 1000,
  "currency": "eur",
  "title": "–ü–æ–¥–ø–∏—Å–∫–∞ Premium",
  "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Premium —Ñ—É–Ω–∫—Ü–∏–∏",
  "successUrl": "https://your-site.com/success",
  "failUrl": "https://your-site.com/fail",
  "email": "user@example.com",
  "savePaymentMethod": true,
  "customerId": "user_123",
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É",
  "period": "monthly"
}
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `amount` - –°—É–º–º–∞ –≤ –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö –≤–∞–ª—é—Ç—ã (—Ü–µ–Ω—Ç—ã –¥–ª—è EUR, –∫–æ–ø–µ–π–∫–∏ –¥–ª—è RUB)
- `currency` - –ö–æ–¥ –≤–∞–ª—é—Ç—ã: `"eur"` –∏–ª–∏ `"rub"` (lowercase!)
- `title` - –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–∫–∞–∑–∞ (–º–∞–∫—Å. 100 UTF-16 —Å–∏–º–≤–æ–ª–æ–≤)
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–º–∞–∫—Å. 300 UTF-16 —Å–∏–º–≤–æ–ª–æ–≤)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- `successUrl` - URL —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ
- `failUrl` - URL —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –æ–ø–ª–∞—Ç–µ
- `email` - Email –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- `savePaymentMethod` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç `shop.recurrent = true`)
- `customerId` - –í–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (–º–∞–∫—Å. 256 —Å–∏–º–≤–æ–ª–æ–≤)
- `comment` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
- `period` - –ü–µ—Ä–∏–æ–¥ –æ–ø–ª–∞—Ç—ã:
  - `"onetime"` - —Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `"weekly"` - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
  - `"monthly"` - –µ–∂–µ–º–µ—Å—è—á–Ω–æ
  - `"quarterly"` - –µ–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ
  - `"halfyearly"` - —Ä–∞–∑ –≤ –ø–æ–ª–≥–æ–¥–∞
  - `"yearly"` - –µ–∂–µ–≥–æ–¥–Ω–æ

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "uuid": "550e8400-e29b-41d4-a716-446655440000",
  "paymentUrl": "https://tribute.tg/pay/550e8400..."
}
```

---

### 3. **GET /shop/orders** - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ ID (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏).

**–û—Ç–≤–µ—Ç 200:**
```json
[
  {
    "uuid": "550e8400-e29b-41d4-a716-446655440000",
    "amount": 1000,
    "currency": "eur",
    "title": "–ü–æ–¥–ø–∏—Å–∫–∞ Premium",
    "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
    "status": "paid",
    "email": "user@example.com",
    "successUrl": "https://your-site.com/success",
    "failUrl": "https://your-site.com/fail",
    "paymentUrl": "https://tribute.tg/pay/...",
    "createdAt": "2026-02-05T10:30:00Z",
    "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
    "period": "monthly",
    "memberStatus": "active",
    "memberExpiresAt": "2026-03-05T10:30:00Z"
  }
]
```

**–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–∞:**
- `"pending"` - –æ–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
- `"paid"` - –æ–ø–ª–∞—á–µ–Ω
- `"failed"` - –Ω–µ—É–¥–∞—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞

**–°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–ø–∏—Å–∫–∏ (–¥–ª—è —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤):**
- `"active"` - –∞–∫—Ç–∏–≤–Ω–∞
- `"cancelled"` - –æ—Ç–º–µ–Ω–µ–Ω–∞

---

### 4. **GET /shop/orders/{orderUuid}/status** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –ø–æ –µ–≥–æ UUID.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `orderUuid` (path) - UUID –∑–∞–∫–∞–∑–∞

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "status": "paid"
}
```

---

## üí≥ Token Charging (Merchant-Initiated Payments)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.

**‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –§—É–Ω–∫—Ü–∏—è `tokenCharging` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞.

### 5. **POST /shop/charges** - –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.

**–õ–∏–º–∏—Ç—ã —Å—É–º–º (–≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö):**
- EUR: 100 - 300,000 (‚Ç¨1 - ‚Ç¨3,000)
- RUB: 10,000 - 30,000,000 (‚ÇΩ100 - ‚ÇΩ300,000)

**Rate Limiting:**
- 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É —Å–ø–∏—Å–∞–Ω–∏—è–º–∏ —Å –æ–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 429)
- –¢–æ–ª—å–∫–æ –æ–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ç–æ–∫–µ–Ω (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 409)

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "token": "550e8400-e29b-41d4-a716-446655440000",
  "amount": 1000,
  "reference": "invoice_12345",
  "idempotencyKey": "unique_key_123"
}
```

**–ü–æ–ª—è:**
- `token` (required) - UUID –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
- `amount` (required) - –°—É–º–º–∞ –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö
- `reference` (optional) - –í–∞—à —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è (–º–∞–∫—Å. 256 —Å–∏–º–≤–æ–ª–æ–≤)
- `idempotencyKey` (optional) - –ö–ª—é—á –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π (–º–∞–∫—Å. 64 —Å–∏–º–≤–æ–ª–∞)

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "chargeUuid": "650e8400-e29b-41d4-a716-446655440000",
  "status": "processing",
  "amount": 1000,
  "currency": "eur",
  "token": "550e8400-e29b-41d4-a716-446655440000",
  "reference": "invoice_12345",
  "createdAt": "2026-02-05T10:30:00Z"
}
```

**–°—Ç–∞—Ç—É—Å—ã —Å–ø–∏—Å–∞–Ω–∏—è:**
- `"pending"` - –≤ –æ–∂–∏–¥–∞–Ω–∏–∏
- `"processing"` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- `"success"` - —É—Å–ø–µ—à–Ω–æ
- `"failed"` - –Ω–µ—É–¥–∞—á–∞
- `"timeout"` - —Ç–∞–π–º–∞—É—Ç

---

### 6. **GET /shop/charges/{chargeUuid}** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–ø–∏—Å–∞–Ω–∏—è

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è.

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "chargeUuid": "650e8400-e29b-41d4-a716-446655440000",
  "status": "success",
  "amount": 1000,
  "currency": "eur",
  "token": "550e8400-e29b-41d4-a716-446655440000",
  "createdAt": "2026-02-05T10:30:00Z",
  "processedAt": "2026-02-05T10:30:15Z"
}
```

---

### 7. **GET /shop/tokens/{token}** - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–∫–µ–Ω–µ

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.

**–û—Ç–≤–µ—Ç 200:**
```json
{
  "token": "550e8400-e29b-41d4-a716-446655440000",
  "cardLast4": "4242",
  "cardBrand": "VISA",
  "customerId": "user_123",
  "amount": 1000,
  "currency": "eur",
  "active": true,
  "createdAt": "2026-01-01T10:00:00Z",
  "lastUsedAt": "2026-02-05T10:30:00Z"
}
```

---

## üîî Webhooks

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö –º–∞–≥–∞–∑–∏–Ω–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
1. –ü–∞–Ω–µ–ª—å –∞–≤—Ç–æ—Ä–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (‚ãØ) ‚Üí API Keys
2. –£–∫–∞–∂–∏—Ç–µ URL –≤–µ–±—Ö—É–∫–∞ –≤ –ø–æ–ª–µ "Webhook URL": `https://your-server.com/webhook/tribute`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `trbt-signature` —Å HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å—é —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–π –≤–∞—à–∏–º API –∫–ª—é—á–æ–º.

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:
–ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —á–µ—Ä–µ–∑: 5 –º–∏–Ω, 15 –º–∏–Ω, 30 –º–∏–Ω, 1 —á–∞—Å, 10 —á–∞—Å–æ–≤.

---

## ‚ùå –ö–æ–¥—ã –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "error": "error_not_found",
  "message": "Shop not found"
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:**
- `"error_bad_request"` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `"error_not_found"` - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `"error_not_permitted"` - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞
- `"no_access"` - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω

**HTTP —Å—Ç–∞—Ç—É—Å—ã:**
- `200` - —É—Å–ø–µ—Ö
- `400` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–Ω–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á)
- `403` - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `409` - –∫–æ–Ω—Ñ–ª–∏–∫—Ç (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `429` - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- `502` - –æ—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –º–∞–≥–∞–∑–∏–Ω–∞ (EN)](https://wiki.tribute.tg/for-shops/api)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –º–∞–≥–∞–∑–∏–Ω–∞ (RU)](https://wiki.tribute.tg/ru/for-shops/api-magazina)
- [Webhooks](https://wiki.tribute.tg/for-shops/api/webhooks)
- [Token Charging](https://wiki.tribute.tg/for-shops/api/token-charging)
- [Methods](https://wiki.tribute.tg/for-shops/api/methods)

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ (Node.js/TypeScript)

```typescript
const createOrder = async () => {
  const response = await fetch('https://tribute.tg/api/v1/shop/orders', {
    method: 'POST',
    headers: {
      'Api-Key': 'your_api_key_here',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      amount: 1000, // ‚Ç¨10.00
      currency: 'eur',
      title: 'Premium –ø–æ–¥–ø–∏—Å–∫–∞',
      description: '–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Premium',
      period: 'monthly',
      customerId: 'user_12345'
    })
  });

  const data = await response.json();
  console.log('Payment URL:', data.paymentUrl);
  return data;
};
```

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

```typescript
const checkOrderStatus = async (orderUuid: string) => {
  const response = await fetch(
    `https://tribute.tg/api/v1/shop/orders/${orderUuid}/status`,
    {
      headers: {
        'Api-Key': 'your_api_key_here'
      }
    }
  );

  const data = await response.json();
  console.log('Order status:', data.status); // pending | paid | failed
  return data;
};
```

### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–∞

```typescript
import crypto from 'crypto';

const verifyWebhookSignature = (
  body: string,
  signature: string,
  apiKey: string
): boolean => {
  const hmac = crypto.createHmac('sha256', apiKey);
  hmac.update(body);
  const expectedSignature = hmac.digest('hex');
  return signature === expectedSignature;
};

// Express.js endpoint
app.post('/webhook/tribute', express.raw({ type: 'application/json' }), (req, res) => {
  const signature = req.headers['trbt-signature'] as string;
  const body = req.body.toString();

  if (!verifyWebhookSignature(body, signature, process.env.TRIBUTE_API_KEY!)) {
    return res.status(401).send('Invalid signature');
  }

  const event = JSON.parse(body);

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
  if (event.status === 'paid') {
    console.log('Order paid:', event.uuid);
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
  }

  res.status(200).send('OK');
});
```
