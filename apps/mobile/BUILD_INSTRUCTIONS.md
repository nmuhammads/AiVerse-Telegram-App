# üì± Android Build Instructions

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** v22+
- **Android Studio** —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º JBR (Java 21)
- **Android SDK** —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **–≠–º—É–ª—è—Ç–æ—Ä** –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Android

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ JAVA_HOME

```powershell
# –í—Ä–µ–º–µ–Ω–Ω–æ (–¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ PowerShell)
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"

# –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
# 1. Win + R ‚Üí sysdm.cpl ‚Üí Enter
# 2. –í–∫–ª–∞–¥–∫–∞ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ" ‚Üí "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã"
# 3. –í "–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ" ‚Üí "–°–æ–∑–¥–∞—Ç—å":
#    - –ò–º—è: JAVA_HOME
#    - –ó–Ω–∞—á–µ–Ω–∏–µ: C:\Program Files\Android\Android Studio\jbr
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd apps/mobile

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ Metro bundler
npx expo start --clear

# –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ 'a' –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ Android
```

### –°–±–æ—Ä–∫–∞ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
cd apps/mobile

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å android –ø–∞–ø–∫—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npx expo prebuild --platform android --clean

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"
npx expo run:android
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Monorepo

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç monorepo —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã expo-router –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∞–π–ª `expo-router-ctx.js`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `metro.config.js` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Metro —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π monorepo
- `expo-router-ctx.js` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è expo-router
- `app.json` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Expo —Å `extra.router.root`

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ JAVA_HOME

```
ERROR: JAVA_HOME is not set
```

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ JAVA_HOME –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ.

### –û—à–∏–±–∫–∞ EXPO_ROUTER_APP_ROOT

```
Invalid call at line 2: process.env.EXPO_ROUTER_APP_ROOT
```

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–∞ –æ—à–∏–±–∫–∞ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ. –ï—Å–ª–∏ –æ–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `expo-router-ctx.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `metro.config.js` —Å–æ–¥–µ—Ä–∂–∏—Ç resolver –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ "Unable to load script"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å adb reverse –¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞
adb reverse tcp:8081 tcp:8081

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å bundle
# –ù–∞–∂–º–∏—Ç–µ 'r' –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Metro
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
apps/mobile/
‚îú‚îÄ‚îÄ app/                    # –ú–∞—Ä—à—Ä—É—Ç—ã expo-router
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # Tab –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ _layout.tsx        # Root layout
‚îú‚îÄ‚îÄ components/            # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ android/               # –ù–∞—Ç–∏–≤–Ω—ã–π Android –∫–æ–¥ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ metro.config.js        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Metro
‚îú‚îÄ‚îÄ expo-router-ctx.js     # –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è monorepo
‚îî‚îÄ‚îÄ app.json              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Expo
```
